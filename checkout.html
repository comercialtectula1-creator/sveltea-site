<!doctype html>
<html lang="es">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Checkout — SVELTEA</title>
<link rel="stylesheet" href="styles.css"></head>
<body class="theme-dark">
  <div class="container" style="padding:40px;">
    <h1>Checkout (simulado)</h1>
    <div id="checkoutSummary" class="muted"></div>
    <form id="paymentForm" style="max-width:600px;margin-top:20px">
      <label>Nombre en la tarjeta<input name="cardname" required></label>
      <label>Número de tarjeta<input name="cardnum" required></label>
      <label>Método de pago
        <select name="payment">
          <option value="card">Tarjeta</option>
          <option value="paypal">PayPal</option>
          <option value="oxxo">OXXO</option>
        </select>
      </label>
      <div style="display:flex;gap:12px;margin-top:12px">
        <button class="btn primary" type="submit">Pagar (simulado)</button>
        <a class="btn ghost" href="index.html">Volver</a>
      </div>
    </form>
    <div id="paymentResult" class="muted" style="margin-top:12px"></div>
  </div>
<script src="product.js"></script>
<script>
const form = document.getElementById('paymentForm');
const summary = document.getElementById('checkoutSummary');
function calcSummary(){
  const cart = JSON.parse(localStorage.getItem('sveltea_cart')||'{}');
  let total=0; let items=0;
  for(const id in cart){ const p = PRODUCTS.find(x=>x.id===id); if(p){ total += p.price*cart[id]; items += cart[id]; } }
  summary.textContent = `Productos en carrito: ${items} | Total: $${total.toFixed(2)} MXN`;
}
calcSummary();
form?.addEventListener('submit',e=>{
  e.preventDefault();
  const payment = new FormData(form).get('payment');
  if(payment==='paypal'){ document.getElementById('paymentResult').textContent='Redirigiendo a PayPal (simulado)...'; setTimeout(()=>window.location.href='https://www.paypal.com',1200); }
  else if(payment==='oxxo'){ document.getElementById('paymentResult').textContent='Código OXXO generado (simulado).'; localStorage.removeItem('sveltea_cart'); }
  else { document.getElementById('paymentResult').textContent='Pago con tarjeta procesado (simulado). Gracias por tu compra.'; localStorage.removeItem('sveltea_cart'); }
});
</script>
</body></html>
